channel: mt
target_processes:
  QCD:
    split_categories:
      njets:
        - "==0"
        - "==1"
        - ">=2"
    split_categories_binedges:
      njets: [-0.5, 0.5, 1.5, 12.5]

    SRlike_cuts:
      had_tau_id_vs_jet: id_tau_vsJet_Tight_2 > 0.5
      # -------------------------------------------
      lep_mt: (mt_1 < 50)
      nbtag: (nbtag >= 0)
      tau_pair_sign: ((q_1*q_2) > 0)
      lep_iso: ((iso_1 >= 0.05) && (iso_1 <= 0.15))
      # -------------------------------------------
      no_extra_lep: (extramuon_veto < 0.5) && (extraelec_veto < 0.5) && (dimuon_veto < 0.5)

    ARlike_cuts:
      had_tau_id_vs_jet: (id_tau_vsJet_VLoose_2 > 0.5) && (id_tau_vsJet_Tight_2 < 0.5)
      # -------------------------------------------
      lep_mt: (mt_1 < 50)
      nbtag: (nbtag >= 0)
      tau_pair_sign: ((q_1*q_2) > 0)
      lep_iso: ((iso_1 >= 0.05) && (iso_1 <= 0.15))
      # -------------------------------------------
      no_extra_lep: (extramuon_veto < 0.5) && (extraelec_veto < 0.5) && (dimuon_veto < 0.5)

    var_dependence: pt_2
    # in case of individual splitting
    var_bins: 
      "==0": [30, 32.32, 35.37, 39.67, 47.70, 150]
      "==1": [30, 32.24, 35.32, 40.32, 50.93, 150]
      ">=2": [30, 32.74, 36.45, 42.48, 57.03, 150]
    fit_option: ["poly_1", "poly_2"]

  Wjets:
    split_categories:
      njets:
        - "==0"
        - "==1"
        - ">=2"
      pt_1:
        - "<=33.6"
        - ">33.6#&&#<=44.1"
        - ">44.1#&&#<=59.6"
        - ">59.6"
    split_categories_binedges:
      njets: [-0.5, 0.5, 1.5, 12.5]
      pt_1: [0.0, 33.6, 44.1, 59.6, 3000]

    SRlike_cuts:
      had_tau_id_vs_jet: id_tau_vsJet_Tight_2 > 0.5
      # -------------------------------------------
      lep_mt: (mt_1 > 70)
      nbtag: (nbtag == 0)
      tau_pair_sign: ((q_1*q_2) < 0)
      lep_iso: ((iso_1 >= 0.0) && (iso_1 <= 0.15))
      # -------------------------------------------
      no_extra_lep: (extramuon_veto < 0.5) && (extraelec_veto < 0.5) && (dimuon_veto < 0.5)

    ARlike_cuts:
      had_tau_id_vs_jet: (id_tau_vsJet_VLoose_2 > 0.5) && (id_tau_vsJet_Tight_2 < 0.5)
      # -------------------------------------------
      lep_mt: (mt_1 > 70)
      nbtag: (nbtag == 0)
      tau_pair_sign: ((q_1*q_2) < 0)
      lep_iso: ((iso_1 >= 0.0) && (iso_1 <= 0.15))
      # -------------------------------------------
      no_extra_lep: (extramuon_veto < 0.5) && (extraelec_veto < 0.5) && (dimuon_veto < 0.5)

    var_dependence: pt_2
    var_bins: 
      "==0":
        "<=33.6":          [30,  31.96,  34.75,  38.35,  45.23, 150]
        ">33.6#&&#<=44.1": [30,  32.61,  35.82,  41.00,  49.28, 150]
        ">44.1#&&#<=59.6": [30,  32.89,  37.18,  42.36,  52.00, 150]
        ">59.6":           [30,  35.55,  43.47,  52.27,  67.75, 150]
      "==1":
        "<=33.6":          [30, 32.45,  35.14, 39.47, 47.09, 150]
        ">33.6#&&#<=44.1": [30, 32.18,  34.80, 39.57, 48.05, 150]
        ">44.1#&&#<=59.6": [30, 31.91,  34.66, 39.05, 47.84, 150]
        ">59.6":           [30, 33.25,  37.70, 44.33, 57.21, 150]
      ">=2":
        "<=33.6":          [30, 33.10, 36.88, 43.49, 55.24, 150]
        ">33.6#&&#<=44.1": [30, 33.00, 36.95, 43.01, 56.36, 150]
        ">44.1#&&#<=59.6": [30, 32.58, 37.18, 44.85, 58.58, 150]
        ">59.6":           [30, 33.55, 38.93, 48.44, 68.08, 150]
    fit_option: ["poly_1", "poly_2"]

  ttbar:
    split_categories:
      njets:
        - "<=1"
        - ">=2"
    split_categories_binedges:
      njets: [-0.5, 1.5, 12.5]

    SR_cuts:
      had_tau_id_vs_jet: id_tau_vsJet_Tight_2 > 0.5
      # -------------------------------------------
      lep_mt: (mt_1 < 70)
      nbtag: (nbtag >= 0)
      tau_pair_sign: ((q_1*q_2) < 0)
      lep_iso: ((iso_1 >= 0.0) && (iso_1 <= 0.15))
      # -------------------------------------------
      no_extra_lep: (extramuon_veto < 0.5) && (extraelec_veto < 0.5) && (dimuon_veto < 0.5)

    AR_cuts:
      had_tau_id_vs_jet: (id_tau_vsJet_VLoose_2 > 0.5) && (id_tau_vsJet_Tight_2 < 0.5)
      # -------------------------------------------
      lep_mt: (mt_1 < 70)
      nbtag: (nbtag >= 0)
      tau_pair_sign: ((q_1*q_2) < 0)
      lep_iso: ((iso_1 >= 0.0) && (iso_1 <= 0.15))
      # -------------------------------------------
      no_extra_lep: (extramuon_veto < 0.5) && (extraelec_veto < 0.5) && (dimuon_veto < 0.5)

    SRlike_cuts:
      had_tau_id_vs_jet: id_tau_vsJet_Tight_2 > 0.5
      # -------------------------------------------
      lep_mt: (mt_1 < 70)
      nbtag: (nbtag >= 0)
      tau_pair_sign: ((q_1*q_2) < 0)
      lep_iso: ((iso_1 >= 0.0) && (iso_1 <= 0.15))
      # -------------------------------------------
      no_extra_lep: '!((extramuon_veto < 0.5) && (extraelec_veto < 0.5) && (dimuon_veto < 0.5))'

    ARlike_cuts:
      had_tau_id_vs_jet: (id_tau_vsJet_VLoose_2 > 0.5) && (id_tau_vsJet_Tight_2 < 0.5)
      # -------------------------------------------
      lep_mt: (mt_1 < 70)
      nbtag: (nbtag >= 0)
      tau_pair_sign: ((q_1*q_2) < 0)
      lep_iso: ((iso_1 >= 0.0) && (iso_1 <= 0.15))
      # -------------------------------------------
      no_extra_lep: '!((extramuon_veto < 0.5) && (extraelec_veto < 0.5) && (dimuon_veto < 0.5))'

    var_dependence: pt_2
    var_bins:
      "<=1": [30, 32.75, 36.28, 41.69, 51.78, 150]
      ">=2": [30, 33.70, 38.57, 46.22, 62.44, 150]
    fit_option: ["poly_1", "poly_2"]

process_fractions:
  processes: ["QCD", "Wjets", "ttbar_J"]

  split_categories:
    njets:
      - "==0"
      - "==1"
      - ">=2"
  split_categories_binedges:
    njets: [-0.5, 0.5, 1.5, 12.5]

  SR_cuts:
    had_tau_id_vs_jet: id_tau_vsJet_Tight_2 > 0.5
    # -------------------------------------------
    lep_mt: (mt_1 < 70)
    nbtag: (nbtag >= 0)
    tau_pair_sign: ((q_1*q_2) < 0)
    lep_iso: ((iso_1 >= 0.0) && (iso_1 <= 0.15))
    # -------------------------------------------
    no_extra_lep: (extramuon_veto < 0.5) && (extraelec_veto < 0.5) && (dimuon_veto < 0.5)
  AR_cuts:
    had_tau_id_vs_jet: (id_tau_vsJet_VLoose_2 > 0.5) && (id_tau_vsJet_Tight_2 < 0.5)
    # -------------------------------------------
    lep_mt: (mt_1 < 70)
    nbtag: (nbtag >= 0)
    tau_pair_sign: ((q_1*q_2) < 0)
    lep_iso: ((iso_1 >= 0.0) && (iso_1 <= 0.15))
    # -------------------------------------------
    no_extra_lep: (extramuon_veto < 0.5) && (extraelec_veto < 0.5) && (dimuon_veto < 0.5)

  var_dependence: mt_1
  var_bins: [0, 10, 20, 30, 40, 50, 60, 70]

